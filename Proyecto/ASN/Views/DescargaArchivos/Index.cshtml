@*@model ASN.Models.KendoDropDownListSelectedViewModel; *@

@{
    ViewBag.Title = "Index";

    Layout = "~/Views/Shared/_Layout.cshtml";
}

@*var tmpViewBag = Html.Raw(Json.Encode(ViewBag.MyObject));
    var myOptions = [];*@

<style>
    .center {
        display: block;
        margin-left: auto;
        margin-right: auto;
        margin-bottom: auto;
        margin-top: auto;
        width: 50%;
    }
</style>

@if (User.Identity.IsAuthenticated)
{
    <div class="container-fluid">
        <div class="col-lg-12 col-md-12">
            <div class="col-lg-4" style="display: none">
                @Html.Label("Período de nómina: ", new { style = "font-size: 15px" })
                @(Html.Kendo().DropDownList()
                        .DataSource(source => source
                            .Custom()
                            .Transport( tr => tr
                                .Read(read =>
                                    {
                                        read.Action("GetPeriodoNominaCMB", "DescargaArchivos").Data("parametroPeriodosNominaActualPasados");
                                    }
                                )
                            )
                        )
                        .Filter("contains")
                        .OptionLabel("- Seleccione Periodo de Nomina - ")
                        .DataValueField("Ident")
                        .DataTextField("Valor")
                        .Name("PeriodoNomina_Id")
                        .SelectedIndex(1)
                        .Enable(true)
                        .Events(e => e.Change("onDropDownChange"))
                        .HtmlAttributes(new { required = "required", style = "text-align:center;width: 14em", validationMessage = "Este campo es requerido." })
                    )
            </div>
            <div class="col-lg-6">
                @Html.Label("Descarga Archivo", new { style = "font-size: 15px" })
                <input type="button" title="Descargar" name="btnDescargar" value="Descargar" onclick="window.location.href='@Url.Action("DownloadCSV")'" />
                @*<input type="button" title="Descargar" name="btnDescargar" value="Descargar" onclick="onClickDescargarArchivo" />*@
                @*<a href="@Url.Action("Create","Solicitudes")" data-role="button" class="k-button k-button-icontext" style="float:right; margin-right:10px;" role="button" aria-disabled="false" tabindex="0">
                    <span class="k-icon k-i-plus"></span> Crear Solicitud
                    </a>*@
            </div>
            <div class="col-lg-2">
            </div>
        </div>
        <div class="row">
            <div class="col-lg-12">
                @*@Html.HiddenFor(x => x.Model.IdPeriodoNomina).Name(IdPeriodoNominaHdn)
                @Html.HiddenFor(x => x.Model.PeriodoNomina).Name(PeriodoNominaHdn)*@
            </div>
        </div>
    </div>
}
else
{
    <p>You are not logged in</p>

    Response.Redirect(Url.Action("Login", "Home"));
}

<script>
    var IdPeriodoNomina_selected = 0;
    var PeriodoNomina_selected = '';
</script>

@Scripts.Render("~/bundles/DescargaArchivos")