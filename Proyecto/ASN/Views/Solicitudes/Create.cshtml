@model ASN.Models.CatSolicitudesSel_Result
@{
    ViewBag.Title = "Crear Solicitud";
}

@if (User.Identity.IsAuthenticated)
{
    <div class="container-fluid">
        <div class="col-lg-12 col-md-12">
            <div class="row">
                <div style="display: inline-block;">
                    @Html.Label("Captura de solicitud", new { style = "font-size: 15px" }) - @Html.Label("Selección de empleados", new { style = "font-size: 15px; color:darkgrey;" }) - @Html.Label("Conceptos motivos por empleado", new { style = "font-size: 15px; color:darkgrey;" })
                </div>
            </div>
            <form id="Formulario" method="post" action='@Url.Action("CreateSolicitud")'>
                @Html.ValidationSummary(true)
                <div class="k-form-field">
                    <section class="">
                        <div class="form-horizontal form-widgets col-sm-12">
                            <div class="form-group">
                                @(Html.HiddenFor(x => x.FolioSolicitud, new { required = "false" }))
                                <label class="control-label col-sm-3" for="PerfilId">Perfil de usuario</label>
                                <div class="col-sm-12 col-md-12">
                                    @(Html.Kendo().DropDownList().DataSource(source =>
                                                        {
                                                            source.Read(read =>
                                                            {
                                                                read.Action("GetPerfilCMB", "Solicitudes");
                                                            })
                                                            .ServerFiltering(true);
                                                        })
                                                        .Filter("contains")
                                                        .OptionLabel("- Seleccione Perfil - ")
                                                        .DataValueField("Ident")
                                                        .DataTextField("Valor")
                                                        .Name("Perfil_Ident")
                                                        .HtmlAttributes(new { required = "required", style = "text-align:center;width: 22.4em", validationMessage = "Este campo es requerido." })
                                                        .Events(x => x.Change("GetInformacionPerfil"))
                                    )
                                </div>
                            </div>
                        </div>
                        <div class="row infoPerfil" style="display:none;">
                            <div class="form-horizontal form-widgets col-sm-4 ">
                                <div class="form-group">
                                    <label class="control-label col-sm-3" for="Fecha">Fecha</label>
                                    <div class="col-sm-4 col-md-4">
                                        <input type="text" id="FechaSolicitud" value="" />
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="control-label col-sm-3" for="pais">País</label>
                                    <div class="col-sm-4 col-md-4">
                                        <input type="text" id="paisName" value="" />
                                    </div>
                                </div>
                            </div>

                            <div class="form-horizontal form-widgets col-sm-4">
                                <div class="form-group">
                                    <label class="control-label col-sm-3" for="site">Site</label>
                                    <div class="col-sm-4 col-md-4">
                                        <input type="text" id="siteName" value="" />
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="control-label col-sm-3" for="cliente">Cliente</label>
                                    <div class="col-sm-4 col-md-4">
                                        <input type="text" id="clienteName" value="" />
                                    </div>
                                </div>
                            </div>
                            <div class="form-horizontal form-widgets col-sm-4">
                                <div class="form-group">
                                    <label class="control-label col-sm-3" for="programa">Programa</label>
                                    <div class="col-sm-4 col-md-4">
                                        <input type="text" id="programaName" value="" />
                                    </div>
                                </div>
                            </div>
                            <div class="form-horizontal form-widgets col-sm-4">
                                <div class="form-group">
                                    <label class="control-label col-sm-3" for="concepto">Concepto</label>
                                    <div class="col-sm-4 col-md-4">
                                        <input type="text" id="ConceptoName" value="" />
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="form-horizontal form-widgets col-sm-6">
                            <div class="form-group">
                                <label class="control-label col-sm-3" for="PeriodoNominaId">Periodo de Nomina</label>
                                <div class="col-sm-4 col-md-4">
                                    @(Html.Kendo().DropDownList().DataSource(source =>
                                                {
                                                    source.Read(read =>
                                                    {
                                                        read.Action("GetPeriodoNominaCMB", "Solicitudes");
                                                    })
                                                    .ServerFiltering(true);
                                                })
                                                .Filter("contains")
                                                .OptionLabel("- Seleccione Periodo de Nomina - ")
                                                .DataValueField("Ident")
                                                .DataTextField("Valor")
                                                .Name("PeriodoNomina_Id")
                                                .HtmlAttributes(new { required = "required", style = "text-align:center;width: 22.4em", validationMessage = "Este campo es requerido." })
                                    )
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="control-label col-sm-3" for="gender" id="gender_label">Motivo</label>
                                <div class="col-sm-4 col-md-4">
                                    @(Html.Kendo().DropDownList().DataSource(source =>
                                        {
                                            source.Read(read =>
                                            {
                                                read.Action("GetMotivoSolicitudCMB", "Solicitudes");
                                            })
                                            .ServerFiltering(true);
                                        })
                                        .Filter("contains")
                                        .OptionLabel("- Motivo - ")
                                        .DataValueField("Id")
                                        .DataTextField("Value")
                                        .Name("MotivoId")
                                        .HtmlAttributes(new { required = "required", style = "text-align:center;width: 22.4em", validationMessage = "Este campo es requerido." })
                                    )
                                </div>
                            </div>

                            <div class="form-group">
                                <label class="control-label col-sm-3" for="language" id="language_label">Justificación</label>
                                <div class="col-sm-6 col-md-6">
                                    @Html.TextArea("Justficacion", "", new { @class = "k-textbox", style = "width: 100%;" })
                                </div>
                            </div>

                            <div class="form-group">
                                <label class="control-label col-sm-3" for="EstatusSolicitud">Estatus de Solicitud</label>
                                <div class="col-sm-4 col-md-4">
                                    @(Html.Kendo().TextBox().Name("EstatusSolicitud").Value("Solicitud").HtmlAttributes(new { disabled = "disabled" }))
                                </div>
                            </div>
                        </div>

                        <div class="form-horizontal form-widgets col-sm-6">
                            <div class="form-group">
                                <label class="control-label col-sm-3" for="Anexo1">Anexos</label>
                                <div class="col-sm-9 col-md-9">
                                    @(Html.Kendo().Upload().Name("files").HtmlAttributes(new { aria_label = "Archivo anexo 1" }))
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="control-label col-sm-3"></label>
                                <div class="col-sm-9 col-md-9">
                                    @(Html.Kendo().CheckBox().Name("CargaMasiva").Label("Realizar carga masiva de personal"))
                                </div>
                            </div>
                            <div class="form-group" id="seccionCargaMasiva" style="display:none;">
                                <label class="control-label col-sm-3" for="skills" id="file">Carga Masiva</label>
                                <div class="col-sm-9 col-md-9">
                                    @(Html.Kendo().Upload().Name("files2").HtmlAttributes(new { aria_label = "Carga masiva de empleados" }))
                                    <label style="color:#f31c1c">En la columna Detalle solo se permiten número enteros y números con decimales.</label>
                                </div>
                            </div>
                        </div>

                        <div class="form-horizontal form-widgets col-sm-12">
                            <div class="buttons-wrap" style="float:right;">
                                <button type="reset" class="k-button k-state-default" onclick="cargaEmpleados(1,0,0);"><span class="k-icon k-i-close"></span> Cancelar</button>
                                <button type="button" class="k-button k-state-default accionwizard" data-accionBoton="1"><span class="k-icon k-i-save"></span> Guardar Borrador</button>
                                <button class="k-button k-state-default accionwizardSeleccion" data-accionBoton="2"><span class="k-icon k-i-redo"></span> Siguiente</button>
                            </div>
                        </div>
                    </section>
                </div>
                <div class="status"></div>
            </form>
        </div>
    </div>
    @(Html.Kendo().Window()
        .Name("windowNotifica")
        .Title("Notificación")
        .Content("")
        .Iframe(true)
        .Draggable()
        .Actions(a => a.Minimize())
        .Width(450)
        .Height(300)
        .Visible(false)
        .Modal(true)
    )

    <script>
        var urlSolicitud = '@Url.Action("CreateSolicitud", "Solicitudes")';
        var urlSolicitudDefault = '@Url.Action("Index", "Solicitudes")';
        var urlSeleccionaPersonal = '@Url.Action("SelecionaEmpleadosSolicitud", "Solicitudes")';
    </script>
}
@*@Scripts.Render("~/bundles/Solicitudes")*@
@Scripts.Render("~/bundles/CrearSolicitud")